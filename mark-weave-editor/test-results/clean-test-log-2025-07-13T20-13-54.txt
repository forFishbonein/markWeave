CRDT æµ‹è¯•ç»“æœ - å¹²å‡€ç‰ˆæœ¬
ç”Ÿæˆæ—¶é—´: 2025/7/14 04:13:54
================================


> mark-weave-editor@0.1.0 test:crdt
> jest --runInBand --verbose

    ================================================================================


    ğŸš€ CRDT æ€§èƒ½åŸºå‡†æµ‹è¯•å¥—ä»¶


    ================================================================================


    --- CRDT åŸºå‡†ç»“æœ ---


    æ€»æ“ä½œæ•°: 900


    è€—æ—¶ (ms): 2571.67


    æ“ä½œ / æ¯«ç§’: 0.35


    æœ€ç»ˆæ–‡æœ¬é•¿åº¦: 487


    æ–‡æœ¬å‰ 120 å­—ç¬¦: crtkibsztxcziuxrcslogvphjcjwuxmgyjtaiyoaakuqrysiffqqhozbyxtorfxxoqzjwgkbpwirvhwtxibqfpmavkqcrtfnluqviallfkodldmpqbgqyftp


    ================================================================================


    ğŸ² CRDT éšæœºæ¨¡ç³Šæµ‹è¯•å¥—ä»¶


    ================================================================================


    ğŸ¯ å¼€å§‹æ‰§è¡Œ 50 è½®éšæœºæ“ä½œæµ‹è¯•...


    âœ… 50 è½®éšæœºæ“ä½œæµ‹è¯•å®Œæˆ


    ğŸ”€ å¼€å§‹å¤æ‚æ··åˆæ“ä½œæµ‹è¯• (30è½®)...


    âœ… å¤æ‚æ··åˆæ“ä½œæµ‹è¯•å®Œæˆ


    âš¡ å¼€å§‹æç«¯è¾¹ç•Œæƒ…å†µæµ‹è¯• (25è½®)...


    âœ… æç«¯è¾¹ç•Œæƒ…å†µæµ‹è¯•å®Œæˆ


    â° å¼€å§‹æ—¶é—´æˆ³å†²çªå‹åŠ›æµ‹è¯• (20è½®)...


    âœ… æ—¶é—´æˆ³å†²çªå‹åŠ›æµ‹è¯•å®Œæˆ


    ğŸŒ å¼€å§‹ç½‘ç»œåˆ†åŒºæ¢å¤æµ‹è¯• (15è½®)...


    âœ… ç½‘ç»œåˆ†åŒºæ¢å¤æµ‹è¯•å®Œæˆ


    ğŸ“Š å¼€å§‹å¤§è§„æ¨¡æ•°æ®é‡æµ‹è¯• (10è½®)...


    âœ… å¤§è§„æ¨¡æ•°æ®é‡æµ‹è¯•å®Œæˆ


    ================================================================================


    âš¡ CRDT å¹¶å‘æ“ä½œæµ‹è¯•å¥—ä»¶


    ================================================================================


    ğŸ“‹ æµ‹è¯•åœºæ™¯: åŸºç¡€å¹¶å‘æ’å…¥ - ä¸¤å®¢æˆ·ç«¯å¼€å¤´åŒæ—¶æ’å…¥


    ğŸ“‹ æµ‹è¯•åœºæ™¯: ä¸¤å®¢æˆ·ç«¯åœ¨æ–‡æ¡£å¼€å¤´åŒæ—¶æ’å…¥ä¸åŒå­—ç¬¦


    åŸºç¡€æ–‡æ¡£: hello


    Aæ’å…¥å­—ç¬¦ "A" opId: 1752437633951@client


    Bæ’å…¥å­—ç¬¦ "B" opId: 1752437633951@client


    ğŸ¯ æœ€ç»ˆç»“æœ: "helloAB"


    ğŸ“‹ æµ‹è¯•åœºæ™¯: ä¸­é—´ä½ç½®å¹¶å‘æ’å…¥ - åœ¨æŒ‡å®šå­—ç¬¦ååŒæ—¶æ’å…¥


    ğŸ”§ Aå®¢æˆ·ç«¯ycharsåˆå§‹é•¿åº¦: 0


    ğŸ”§ Aæ’å…¥åé•¿åº¦: 9


    ğŸ”§ Aå¿«ç…§: start_end


    ğŸ”§ Açš„å­—ç¬¦è¯¦æƒ…:


    ğŸ”§ BåŒæ­¥åé•¿åº¦: 9


    ğŸ”§ Bå¿«ç…§: start_end


    ğŸ“‹ æµ‹è¯•åœºæ™¯: ä¸¤å®¢æˆ·ç«¯åœ¨ä¸‹åˆ’çº¿ååŒæ—¶æ’å…¥


    åŸºç¡€æ–‡æ¡£: start_end


    ğŸ” è°ƒè¯•å­—ç¬¦æŸ¥æ‰¾:


    å­—ç¬¦æ•°ç»„é•¿åº¦: 9


    ä¸‹åˆ’çº¿ "_" çš„opId: 1752437633954_5@client


    æ’å…¥åå„è‡ªçŠ¶æ€:


    A: start_Xend


    B: start_Yend


    ğŸ¯ æœ€ç»ˆç»“æœ: "start_XYend"


    âœ… å­—ç¬¦æ­£ç¡®æ’å…¥åœ¨ä¸‹åˆ’çº¿å


    ğŸ“‹ æµ‹è¯•åœºæ™¯: å¤šå­—ç¬¦å¹¶å‘æ’å…¥ - ä½¿ç”¨insertText


    åŸºç¡€æ–‡æ¡£: base


    Aæ’å…¥å: AAAbase


    Bæ’å…¥å: BBBbase


    ğŸ¯ æœ€ç»ˆç»“æœ: "AAABBBbase"


    ğŸ“‹ æµ‹è¯•åœºæ™¯: ä¸‰å®¢æˆ·ç«¯å¹¶å‘æ’å…¥ - å¤æ‚å¹¶å‘åœºæ™¯


    åŸºç¡€æ–‡æ¡£: start


    æ’å…¥åå„å®¢æˆ·ç«¯çŠ¶æ€:


    A: start1


    B: start2


    C: start3


    ğŸ¯ æœ€ç»ˆç»“æœ:


    A: start132


    B: start132


    C: start132


    âœ… å­—ç¬¦æ’å…¥åœ¨æ–‡æ¡£æœ«å°¾ï¼ˆä¿®æ”¹åçš„è¡Œä¸ºï¼‰


    ğŸ“‹ æµ‹è¯•åœºæ™¯: æ¨¡æ‹Ÿä¸¤ç”¨æˆ·å¿«é€Ÿè¿ç»­è¾“å…¥


    åŸºç¡€æ–‡æ¡£: doc


    å¿«é€Ÿè¾“å…¥å:


    A: doc_end


    B: doc!


    ğŸ¯ æœ€ç»ˆç»“æœ: "doc!_end"


    ğŸ“ åˆ†æç»“æœ: "doc!_end"


    âœ… å­—ç¬¦æŒ‰é¢„æœŸé¡ºåºæ’å…¥


    ğŸ“‹ æµ‹è¯•åœºæ™¯: æ··åˆå¹¶å‘æ“ä½œ - Aæ’å…¥ï¼ŒBåˆ é™¤


    åŸºç¡€æ–‡æ¡£: hello world


    æ“ä½œå:


    A: hello worldX


    B: helloorld


    ğŸ¯ æœ€ç»ˆç»“æœ: "helloorldX"


    === æ··åˆæ“ä½œåçš„å¯è§å­—ç¬¦ ===


    [0] "h" â†’ opId: 1752437633969_0@client (æ—¶é—´æˆ³: 1752437633969_0)


    [1] "e" â†’ opId: 1752437633969_1@client (æ—¶é—´æˆ³: 1752437633969_1)


    [2] "l" â†’ opId: 1752437633969_2@client (æ—¶é—´æˆ³: 1752437633969_2)


    [3] "l" â†’ opId: 1752437633969_3@client (æ—¶é—´æˆ³: 1752437633969_3)


    [4] "o" â†’ opId: 1752437633969_4@client (æ—¶é—´æˆ³: 1752437633969_4)


    [5] "o" â†’ opId: 1752437633969_7@client (æ—¶é—´æˆ³: 1752437633969_7)


    [6] "r" â†’ opId: 1752437633969_8@client (æ—¶é—´æˆ³: 1752437633969_8)


    [7] "l" â†’ opId: 1752437633969_9@client (æ—¶é—´æˆ³: 1752437633969_9)


    [8] "d" â†’ opId: 1752437633969_10@client (æ—¶é—´æˆ³: 1752437633969_10)


    [9] "X" â†’ opId: 1752437633970@client (æ—¶é—´æˆ³: 1752437633970)


    å®é™…ç»“æœåˆ†æ: "helloorldX"


    âœ… åˆ é™¤æ“ä½œç”Ÿæ•ˆï¼Œåˆ é™¤äº†'w 'å­—ç¬¦


    ğŸ“‹ æµ‹è¯•åœºæ™¯: ç©ºæ–‡æ¡£ä¸Šçš„å¹¶å‘æ’å…¥


    æ’å…¥å:


    A: A


    B: B


    ğŸ¯ ç©ºæ–‡æ¡£å¹¶å‘æ’å…¥ç»“æœ: "BA"


    ç»“æœé•¿åº¦: 2


    ğŸ“‹ æµ‹è¯•åœºæ™¯: æ·±å…¥åˆ†ææ—¶é—´æˆ³å’Œæ’åºè§„åˆ™


    æ’å…¥æ—¶é—´åˆ†æ:


      å¼€å§‹æ—¶é—´: 1752437633976


      ä¸­é—´æ—¶é—´: 1752437633976 (æ—¶å·®: 0ms)


      ç»“æŸæ—¶é—´: 1752437633976 (æ—¶å·®: 0ms)


    å®é™…opId:


      Açš„opId: 1752437633976@client


      Bçš„opId: 1752437633976@client


    ğŸ” æœŸæœ›é¡ºåº: æŒ‰æ—¶é—´æˆ³æ’åº, å®é™…é¡ºåº: T2T1


    å­—ç¬¦ "T2" æ—¶é—´æˆ³: 1752437633976


    å­—ç¬¦ "T1" æ—¶é—´æˆ³: 1752437633976


    ğŸ¯ æœ€ç»ˆæ’åº: "T2T1"


    ğŸ“‹ æµ‹è¯•åœºæ™¯: ä¸‰å®¢æˆ·ç«¯æé€Ÿå¹¶å‘æ’å…¥


    ğŸ” baseChars é•¿åº¦: 4


    ğŸ” baseChars: [
      { ch: 'b', opId: '1752437633981_0@client' },
      { ch: 'a', opId: '1752437633981_1@client' },
      { ch: 's', opId: '1752437633981_2@client' },
      { ch: 'e', opId: '1752437633981_3@client' }
    ]


    ğŸ” lastCharId: 1752437633981_3@client


    æé€Ÿæ’å…¥åçŠ¶æ€:


    A: baseA4A3A2A1A0


    B: baseB4B3B2B1B0


    C: baseC4C3C2C1C0


    ğŸ¯ æé€Ÿå¹¶å‘æœ€ç»ˆç»“æœ:


    A: baseB4B3B2B1B0A4A3A2A1A0C4C3C2C1C0


    B: baseB4B3B2B1B0A4A3A2A1A0C4C3C2C1C0


    C: baseB4B3B2B1B0A4A3A2A1A0C4C3C2C1C0


    ğŸ“‹ æµ‹è¯•åœºæ™¯: æ¨¡æ‹Ÿç½‘ç»œåˆ†åŒºå’Œå»¶è¿ŸåŒæ­¥


    åˆ†åŒºæœŸé—´ A-B åŒæ­¥å:


    A-B çŠ¶æ€: start21


    C å­¤ç«‹çŠ¶æ€: startisolated


    ç½‘ç»œæ¢å¤å‰:


    A-B: _network_partitionedstart21


    C: startisolated


    ğŸ¯ ç½‘ç»œæ¢å¤åæœ€ç»ˆçŠ¶æ€:


    A: _network_partitionedstart21isolated


    B: _network_partitionedstart21isolated


    C: _network_partitionedstart21isolated


    ğŸ“‹ æµ‹è¯•åœºæ™¯: 10å®¢æˆ·ç«¯å¤§è§„æ¨¡å¹¶å‘å‹åŠ›æµ‹è¯•


    åŸºç¡€æ–‡æ¡£: shared_document


    æ‰§è¡Œäº† 30 ä¸ªå¹¶å‘æ“ä½œ


    ğŸ¯ å¤§è§„æ¨¡å¹¶å‘æœ€ç»ˆç»“æœ:


    æœ€ç»ˆæ–‡æ¡£: _9_2__0_8_2_8_0_2_2_2_0_4_2_4_0_6_26_0_0_2_0_0_3_2__0_5_2_5_0_1_2_1__7_2_7_shaedocmnt


    æ–‡æ¡£é•¿åº¦: 85


    ğŸ“‹ æµ‹è¯•åœºæ™¯: ä¹±åºæ¶ˆæ¯åŒæ­¥æµ‹è¯•


    æ¨¡æ‹Ÿä¹±åºåŒæ­¥...


    ğŸ¯ ä¹±åºåŒæ­¥æœ€ç»ˆç»“æœ:


    A: C1A2A1B2B1


    B: C1A2A1B2B1


    C: C1A2A1B2B1


    ğŸ“‹ æµ‹è¯•åœºæ™¯: ç›¸åŒæ—¶é—´æˆ³å†²çªè§£å†³


    åˆ›å»ºäº†ç›¸åŒæ—¶é—´æˆ³çš„æ“ä½œ


    ğŸ¯ ç›¸åŒæ—¶é—´æˆ³å†²çªè§£å†³ç»“æœ: AB


    ğŸ“‹ æµ‹è¯•åœºæ™¯: æ¨¡æ‹Ÿç½‘ç»œä¸¢åŒ…å’Œæ¶ˆæ¯ä¸¢å¤±


    ç”Ÿæˆäº† 4 ä¸ªæ›´æ–°


    ä¸¢åŒ…åäº¤ä»˜æƒ…å†µ:


    Aæ”¶åˆ°: 0 ä¸ªæ›´æ–°


    Bæ”¶åˆ°: 0 ä¸ªæ›´æ–°


    Cæ”¶åˆ°: 2 ä¸ªæ›´æ–°


    ä¸¢åŒ…åçŠ¶æ€:


    A: base14


    B: base2


    C: base143


    ğŸ¯ ç½‘ç»œæ¢å¤åæœ€ç»ˆçŠ¶æ€:


    A: base2143


    B: base2143


    C: base2143


    ğŸ“‹ æµ‹è¯•åœºæ™¯: æ¨¡æ‹Ÿä¸åŒç½‘ç»œå»¶è¿Ÿ


    æ¨¡æ‹ŸæŒ‰å»¶è¿Ÿé¡ºåºä¼ è¾“:


    ç¬¬1æ­¥: C â†’ [A, B] (å»¶è¿Ÿ50ms)


      çŠ¶æ€: A="startCA", B="startBC", C="startC"


    ç¬¬2æ­¥: A â†’ [B, C] (å»¶è¿Ÿ100ms)


      çŠ¶æ€: A="startCA", B="startBCA", C="startCA"


    ç¬¬3æ­¥: B â†’ [A, C] (å»¶è¿Ÿ300ms)


      çŠ¶æ€: A="startBCA", B="startBCA", C="startBCA"


    ğŸ¯ å»¶è¿Ÿæ¨¡æ‹Ÿæœ€ç»ˆç»“æœ:


    A: startBCA


    B: startBCA


    C: startBCA


    ğŸ“‹ æµ‹è¯•åœºæ™¯: æ¨¡æ‹Ÿç½‘ç»œé‡å¤ä¼ è¾“


    åŸå§‹çŠ¶æ€: original


    Bæ·»åŠ Xå: originalX


    Aç¬¬ä¸€æ¬¡æ”¶åˆ°æ›´æ–°: originalX


    æ¨¡æ‹Ÿé‡å¤ä¼ è¾“ç›¸åŒæ›´æ–°...


    ç¬¬2æ¬¡åº”ç”¨å: originalX


    ç¬¬3æ¬¡åº”ç”¨å: originalX


    ç¬¬4æ¬¡åº”ç”¨å: originalX


    ç¬¬5æ¬¡åº”ç”¨å: originalX


    ç¬¬6æ¬¡åº”ç”¨å: originalX


    ğŸ¯ é‡å¤ä¼ è¾“å¤„ç†ç»“æœ:


    A: originalX


    B: originalX


    ğŸ“‹ æµ‹è¯•åœºæ™¯: æ¨¡æ‹Ÿç½‘ç»œå¸¦å®½é™åˆ¶å’Œæ‰¹é‡ä¼ è¾“


    ç”Ÿæˆäº† 20 ä¸ªå•ç‹¬æ›´æ–°


    Aå½“å‰çŠ¶æ€: 01234567890123456789


    åˆ†æˆ 4 ä¸ªæ‰¹æ¬¡ä¼ è¾“


    ä¼ è¾“æ‰¹æ¬¡ 1/4 (5ä¸ªæ›´æ–°)


    æ‰¹æ¬¡1åBçŠ¶æ€: 01234


    ä¼ è¾“æ‰¹æ¬¡ 2/4 (5ä¸ªæ›´æ–°)


    æ‰¹æ¬¡2åBçŠ¶æ€: 0123456789


    ä¼ è¾“æ‰¹æ¬¡ 3/4 (5ä¸ªæ›´æ–°)


    æ‰¹æ¬¡3åBçŠ¶æ€: 012345678901234


    ä¼ è¾“æ‰¹æ¬¡ 4/4 (5ä¸ªæ›´æ–°)


    æ‰¹æ¬¡4åBçŠ¶æ€: 01234567890123456789


    ğŸ¯ æ‰¹é‡ä¼ è¾“æœ€ç»ˆç»“æœ:


    A: 01234567890123456789


    B: 01234567890123456789


    ================================================================================


    ğŸ¨ CRDT å¤šæ ¼å¼åŒ–æµ‹è¯•å¥—ä»¶


    ================================================================================


    ğŸ“‹ æµ‹è¯•åœºæ™¯: åµŒå¥—æ ¼å¼åŒ– - ç²—ä½“åŒ…å«æ–œä½“


    åˆå§‹æ–‡æœ¬: Hello World


    å­—ç¬¦èŒƒå›´:


      Hello èŒƒå›´: 1752437634121_0@client åˆ° 1752437634121_4@client


      World èŒƒå›´: 1752437634121_6@client åˆ° 1752437634121_10@client


    ğŸ”¸ Aæ“ä½œ: å¯¹æ•´ä¸ª 'Hello World' åŠ ç²—


    ğŸ”¸ Bæ“ä½œ: å¯¹ 'World' éƒ¨åˆ†æ·»åŠ æ–œä½“


    ğŸ”„ åŒæ­¥æ ¼å¼åŒ–æ“ä½œ...


    æœ€ç»ˆæ ¼å¼æ“ä½œæ•°é‡: 2


    æ ¼å¼æ“ä½œè¯¦æƒ…:


      1. addMark bold (1752437634124@client)


      2. addMark em (1752437634124@client)


    ğŸ“„ ğŸ¯ åµŒå¥—æ ¼å¼åŒ–æœ€ç»ˆç»“æœ:


      çº¯æ–‡æœ¬: "Hello World"


      æ ¼å¼æ“ä½œæ•°: 2


      æ ¼å¼åŒ–æ–‡æœ¬: [H:bold][e:bold][l:bold][l:bold][o:bold][ :bold][W:bold,em][o:bold,em][r:bold,em][l:bold,em][d:bold,em]


      æ ¼å¼æ“ä½œè¯¦æƒ…:


        1. addMark bold (1752437634124@client)


        2. addMark em (1752437634124@client)




    é¢„æœŸæ•ˆæœ: 'Hello World' å…¨éƒ¨åŠ ç²—ï¼Œ'World' éƒ¨åˆ†è¿˜æœ‰æ–œä½“


    ğŸ“‹ æµ‹è¯•åœºæ™¯: äº¤å‰æ ¼å¼åŒ– - AåŠ ç²—ABCï¼ŒBæ–œä½“DEFï¼ŒCåŒæ—¶æœ‰ç²—ä½“å’Œæ–œä½“


    åˆå§‹æ–‡æœ¬: ABCDEF


    å­—ç¬¦IDæ˜ å°„:


      A(0): 1752437634128_0@client


      B(1): 1752437634128_1@client


      C(2): 1752437634128_2@client


      D(3): 1752437634128_3@client


      E(4): 1752437634128_4@client


      F(5): 1752437634128_5@client


    ğŸ”¸ Aæ“ä½œ: å¯¹ 'ABC' (ä½ç½®0-2) åŠ ç²—


    ğŸ”¸ Bæ“ä½œ: å¯¹ 'DEF' (ä½ç½®3-5) æ·»åŠ æ–œä½“


    ğŸ”„ å¹¶å‘åŒæ­¥Aå’ŒBçš„æ ¼å¼åŒ–æ“ä½œ...


    ğŸ”¸ Cæ“ä½œ: å¯¹ 'CD' (ä½ç½®2-3) æ—¢åŠ ç²—åˆæ–œä½“


    ğŸ”„ ä¸‰æ–¹åŒæ­¥æ‰€æœ‰æ ¼å¼åŒ–æ“ä½œ...


    æœ€ç»ˆæ ¼å¼æ“ä½œæ€»æ•°: 4


    ç²—ä½“æ“ä½œ: 2 ä¸ª


    æ–œä½“æ“ä½œ: 2 ä¸ª


    é¢„æœŸæ ¼å¼åˆ†å¸ƒ:


      A: ç²—ä½“, B: ç²—ä½“, C: ç²—ä½“+æ–œä½“, D: æ–œä½“+ç²—ä½“, E: æ–œä½“, F: æ–œä½“


    ğŸ“„ ğŸ¯ äº¤å‰æ ¼å¼åŒ–æœ€ç»ˆç»“æœ:


      çº¯æ–‡æœ¬: "ABCDEF"


      æ ¼å¼æ“ä½œæ•°: 4


      æ ¼å¼åŒ–æ–‡æœ¬: [A:bold][B:bold][C:bold,em][D:em,bold][E:em][F:em]


      æ ¼å¼æ“ä½œè¯¦æƒ…:


        1. addMark em (1752437634130@client)


        2. addMark bold (1752437634130@client)


        3. addMark bold (1752437634131@client)


        4. addMark em (1752437634131@client)




    ğŸ“‹ æµ‹è¯•åœºæ™¯: remove-wins ä¼˜å…ˆçº§ - å¤šå®¢æˆ·ç«¯æ ¼å¼å†²çª


    ğŸ¯ remove-wins æœ€ç»ˆç»“æœ: test


    æ ¼å¼æ“ä½œç»Ÿè®¡:


    æ·»åŠ æ“ä½œ: 3


    ç§»é™¤æ“ä½œ: 1


    ğŸ“‹ æµ‹è¯•åœºæ™¯: é“¾å¼æ ¼å¼åŒ–æ“ä½œ


    åˆå§‹æ®µè½: This is a complex paragraph for testing.


    ç›®æ ‡è¯æ±‡å®šä½:


      'This' (0-3): 1752437634140_0@client åˆ° 1752437634140_3@client


      'complex' (10-16): 1752437634140_10@client åˆ° 1752437634140_16@client


      'testing' (31-37): 1752437634141_31@client åˆ° 1752437634141_37@client


    ğŸ”¸ Açš„æ ¼å¼åŒ–æ“ä½œ:


      1. å¯¹ 'This' åŠ ç²—


      2. å¯¹ 'complex' æ·»åŠ æ–œä½“


      3. å¯¹ 'testing' æ·»åŠ é“¾æ¥


    ğŸ”¸ Bçš„æ ¼å¼åŒ–æ“ä½œ:


      1. å¯¹ 'complex' åŠ ç²— (ä¸Açš„æ–œä½“å åŠ )


      2. å¯¹ 'This' æ·»åŠ æ–œä½“ (ä¸Açš„ç²—ä½“å åŠ )


    ğŸ”„ ç¬¬ä¸€è½®åŒæ­¥æ ¼å¼åŒ–æ“ä½œ...


    ç¬¬ä¸€è½®åŒæ­¥å: This is a complex paragraph for testing.


    ç¬¬ä¸€è½®åæ ¼å¼æ“ä½œæ•°: 5


    ğŸ”¸ ç¬¬äºŒè½®æ“ä½œ - æ’¤é”€éƒ¨åˆ†æ ¼å¼:


      A: æ’¤é”€ 'This' çš„ç²—ä½“


      B: æ’¤é”€ 'complex' çš„æ–œä½“


    ğŸ”„ æœ€ç»ˆåŒæ­¥æ‰€æœ‰æ“ä½œ...


    æœ€ç»ˆæ ¼å¼æ“ä½œæ€»æ•°: 7


    æ¶‰åŠçš„æ ¼å¼ç±»å‹: [ 'bold', 'em', 'link' ]


    æ·»åŠ æ“ä½œ: 5 ä¸ª, ç§»é™¤æ“ä½œ: 2 ä¸ª


    é¢„æœŸæœ€ç»ˆæ•ˆæœ:


      'This': ä»…æ–œä½“ (ç²—ä½“è¢«æ’¤é”€)


      'complex': ä»…ç²—ä½“ (æ–œä½“è¢«æ’¤é”€)


      'testing': æœ‰é“¾æ¥


    ğŸ“„ ğŸ¯ é“¾å¼æ ¼å¼åŒ–æœ€ç»ˆç»“æœ:


      çº¯æ–‡æœ¬: "This is a complex paragraph for testing."


      æ ¼å¼æ“ä½œæ•°: 7


      æ ¼å¼åŒ–æ–‡æœ¬: [T:em][h:em][i:em][s:em] is a [c:bold][o:bold][m:bold][p:bold][l:bold][e:bold][x:bold] paragraph for[ :link][t:link][e:link][s:link][t:link][i:link][n:link]g.


      æ ¼å¼æ“ä½œè¯¦æƒ…:


        1. addMark bold (1752437634144@client)


        2. addMark em (1752437634144@client)


        3. addMark link (1752437634144@client)


        4. addMark bold (1752437634144@client)


        5. addMark em (1752437634145@client)


        6. removeMark bold (1752437634146@client)


        7. removeMark em (1752437634147@client)




    ğŸ“‹ æµ‹è¯•åœºæ™¯: è¾¹ç•Œæ ¼å¼åŒ– - å•å­—ç¬¦æ ¼å¼


    ğŸ“„ ğŸ¯ è¾¹ç•Œæ ¼å¼åŒ–ç»“æœ:


      çº¯æ–‡æœ¬: "XY"


      æ ¼å¼æ“ä½œæ•°: 3


      æ ¼å¼åŒ–æ–‡æœ¬: [X:em,bold,link]Y


      æ ¼å¼æ“ä½œè¯¦æƒ…:


        1. addMark em (1752437634154@client)


        2. addMark bold (1752437634154@client)


        3. addMark link (1752437634154@client)




    ğŸ“‹ æµ‹è¯•åœºæ™¯: å¹¶å‘æ ¼å¼åŒ–ä¸æ–‡æœ¬ç¼–è¾‘æ··åˆ


    æ··åˆæ“ä½œåå„å®¢æˆ·ç«¯çŠ¶æ€:


    A (æ’å…¥): eding_tit


    B (æ ¼å¼åŒ–): edit


    C (åˆ é™¤+æ ¼å¼åŒ–): edt


    ğŸ¯ æ··åˆåœºæ™¯æœ€ç»ˆç»“æœ:


    A: eding_tt


    B: eding_tt


    C: eding_tt


    ================================================================================


    ğŸ”„ CRDT å†²çªè§£å†³æµ‹è¯•å¥—ä»¶


    ================================================================================


    ğŸ“‹ æµ‹è¯•åœºæ™¯: remove-wins å†²çªè§£å†³æœºåˆ¶


    åˆå§‹æ–‡æœ¬: hi


    å­—ç¬¦ID: { hId: '1752437634212_0@client', iId: '1752437634212_1@client' }


    C2åŒæ­¥å: hi


    C1åŠ ç²—æ“ä½œå®Œæˆï¼ŒC2å·²åŒæ­¥


    C2å–æ¶ˆç²—ä½“æ“ä½œå®Œæˆï¼ŒC1å·²åŒæ­¥


    C1æ ¼å¼æ“ä½œæ•°é‡: 2


    C2æ ¼å¼æ“ä½œæ•°é‡: 2


    æ ¼å¼æ“ä½œç±»å‹: [ 'addMark-bold', 'removeMark-bold' ]


    ğŸ”¥ convertCRDTToProseMirrorDoc è¢«è°ƒç”¨


    the newest yformatOps:  []


    the newest ychars []


    âœ… Generated paragraph: []


    ğŸ“„ ProseMirror æ–‡æ¡£ç»“æ„:


    {
      "type": "doc",
      "content": [
        {
          "type": "paragraph"
        }
      ]
    }


    âš ï¸ æ–‡æ¡£ä¸ºç©ºï¼Œè¿™ç¬¦åˆremove-winsé€»è¾‘


    ================================================================================


    ğŸ¯ CRDT ç¡®å®šæ€§æµ‹è¯•å¥—ä»¶


    ================================================================================


    ğŸ“‹ æµ‹è¯•åœºæ™¯: ä¸¤ä¸ªå®¢æˆ·ç«¯å¹¶å‘æ’å…¥æ–‡æœ¬


    æ’å…¥åå„è‡ªçŠ¶æ€:


    A: abc


    B: XYZ


    ğŸ¯ åŒæ­¥åæœ€ç»ˆç»“æœ:


    A: XYZabc


    B: XYZabc


    âœ… çŠ¶æ€ä¸€è‡´æ€§éªŒè¯: é€šè¿‡


